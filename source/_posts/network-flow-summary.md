---
title: 网络流学习总结
date: 2025-03-12 10:41:00
excerpt: 网络流学习总结。。
categories: 
	- 总结
tags:
	- 网络流
    - 最大流
    - 最小割
    - 费用流
---

## 定义与性质
形象地说，网络流可以看作一个输水网络，每个管道有一个单位时间内的流量限制，求最大流就是求单位时间最多可以输多少水。下面给出一些严谨的定义。
### 网络流图
带权的有向图 $G=(V,E)$，满足以下条件，则称为网络流图（容量网络）：
- 仅有一个入度为 $0$ 的顶点 $s$，称 $s$ 为源点。
- 仅有一个出度为 $0$ 的顶点 $t$，称 $t$ 为汇点。
- 每条边的权值都为非负数，称为该边的容量，记作 $c(i,j)$。

### 弧与弧的流量
弧是网络流图中的一条带权边 $(u,v)∈E$。

通过容量网络 $G$ 中每条弧 $(u,v)$ 上的实际流量记为 $f(u,v)$。

### 剩余容量与残量网络
边的剩余容量简称为残量 $c_f(u,v)=c(u,v)-f(u,v)$。

由所有边均为其残量的 $G_f(V,E_{f})$ 称为残量网络。

### 可行流与最大流
在容量网络中满足以下条件的网络流称为可行流：
- 容量限制：$ f(u, v)\le c(u,v)$，一条边的流不能超过它的容量。
- 流守恒：除非 $u = s$ 或 $u = t$，否则 $\sum_{w \in V} f(u, w) = 0$，除源点与汇点外，结点流入流量等于流出流量。

对于一个网络流图，它最大的可行流即为它的最大流。

### 增广路
增广路是一条路径 $(u_1,u_2,\cdots ,u_k)$，满足 $u_1=s,u_k=t$ 及 $c_f(u_i,u_{i+1})>0$。这表示沿这条路径传送更多流是可能的。

当且仅当剩余网络 $G_f$ 没有增广路时处于最大流。

### 性质
在任意时刻，$G$ 的网络流都满足如下性质：
- 容量限制：$ f(u, v)\le c(u,v)$，一条边的流不能超过它的容量。
- 斜对称：$ f(u,v) = -f(v,u)$，由 $u$ 到 $v$ 的净流必须是由 $v$ 到 $u$ 的净流的相反。
- 流守恒：除非 $u = s$ 或 $u = t$，否则 $\sum_{w \in V} f(u, w) = 0$，除源点与汇点外，结点流入流量等于流出流量。

## 最大流
最大流上面已有定义，即从 $s$ 到 $t$ 的最大可行流。比如对于下面的容量网络，它的最大流为 $23$。约定 $a/b$ 表示这条边的流量为 $a$，容量为 $b$。

![](/source/img/network-flow-summary/p1.png)

下面给出最大流的几种求法。
### EK算法
求最大流的最直观想法就是不断地在容量网络里找增广路，并将它跑满加入答案。但这样有一个问题：如果不巧找到了一个增广路把本来不该在最大流里的边给增广了，怎么办？

举一个很简单的例子。

![](/source/img/network-flow-summary/p2.png)

很容易看出它的最大流为 $4$，但我们找到一条容量为 $3$ 的增广路后就无法继续增广了。

这时我们有一种方法，即对每条边建立一条反向边，允许将流经这条边的流量撤销回去。根据斜对称的性质 $f(u,v)=-f(v,u)$，在反向边上增加一单位的流量就相当于在正向边上减少一单位流量。所以当我们增广到反向边时，也就相当于在正向边上“撤回”了这部分流量，这样就可以求出最大流。

形象化地说，仍然将网络上的边看作水管，在反向边上增加流量就相当于把流出的水退回去，最终从管道中流出的水就是正向边流量减去反向边流量。

EK算法就是一种 $O(VE^2)$ 求最大流的算法。它每次选择一条最短的增广路来增广并将它跑满。

**参考资料**

[网络流详解: 从入门到放弃 - rvalue's blog](https://blog.rvalue.moe/10650849/)

[网络流 - OI Wiki](https://oiwiki.org/graph/flow/max-flow/)

[网络流 - 维基百科](https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E6%B5%81)